<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id="myCanvas" width="100" height="100" style="background-color: yellow;"></canvas>
    <script>
        window.addEventListener('load', function() {

            const loadImage = function(src) {
                return new Promise(function(resolve, reject) {
                    const img = new Image();
                    img.src = src;
                    img.onload = function() {
                        resolve(img);
                    }
                    img.onerror = function(event) {
                        reject(event);
                    }
                });
            };

            const createMario = function(image) {
                const _img = image;
                const _width = 100;
                const _height = 100;
                let _counter = 800;
                let _posX = 0;
                let _posY = 0;

                const act = function () {
                    _counter = _counter - 100;

                    if (_counter == 500) {
                        _counter = 800;
                    }
                };

                const draw = function (context) {
                    context.drawImage(
                        _img,
                        400,
                        _counter,
                        _width, 
                        _height, 
                        _posX, 
                        _posY, 
                        _width, 
                        _height
                    );
                };

                return {
                    act: act,
                    draw: draw,
                }
            };

            (async function() {
                try {

                    const image = await loadImage("a.png");
                    // aqui ya tenemos la imagen
                    const mario = createMario(image);

                } catch (error) {
                    console.log(error);
                }
            })();
/*
            const canvas = document.getElementById("myCanvas");
            const contexto = canvas.getContext("2d");
            var mario = {};
            mario.img = new Image();
            mario.img.src = "a.png";

            mario.img.onload = function() {
                var contador = 800;

                setInterval(function () {
                    contexto.clearRect(0, 0, canvas.width, canvas.height);

                    contexto.drawImage(
                    mario.img,
                    400,
                    contador,
                    100, 100, 0, 0, 100, 100
                    );

                    contador = contador - 100;
                    if (contador == 500) {
                        contador = 800;
                    }

                }, 110);
            }*/
        });
    </script>
</body>
</html>